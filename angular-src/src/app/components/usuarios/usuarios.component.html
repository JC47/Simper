<div class="container">
  <div class="row">
    <h2 class="text-center col-2 offset-5">Usuarios</h2>
    <button type="button" class="btn btn-primary offset-1 col-2" (click)="openVarsGen=true">Variables Generales</button>
    <button type="button" (click)="openNew()" class="btn btn-warning offset-1 col-1">Agregar</button>

  </div>

  <hr>
  <div class="text-center" *ngFor="let alert of alerts" style="z-index:10000;width:100%; ">
    <alert [type]="alert.type" [dismissOnTimeout]="alert.timeout"><h3>{{ alert.msg }}</h3></alert>
  </div>
</div>





<!--++++++++++++++++++++++++++++++   Tarjeta de Usuario    +++++++++++++++++++++++++++++++++++-->
<div class="container contain">


<div class="card-columns" >
  <div class="card" *ngFor="let usuario of usuarios">


    <div class="card-block">
      <div class="row">
        <img  src="assets/img/user.png" style="height:100px">

        <div class="col-8">
          <h4 class="card-title">{{usuario.nombreUsuario}} {{usuario.apPat}}</h4>
          <p class="card-text">
            Usuario: {{usuario.user}}
            <br>
            Contraseña: {{usuario.contra}}
            <br>
            Agregado Por: {{getAdministrador(usuario.Administrador_idAdministrador)}}
          </p>
        </div>
      </div>




    </div>
      <div class="card-footer">
        <button type="button" class="btn btn-danger col-4" (click)="confDelete(usuario)" >Eliminar</button>
          <button type="button"  class="btn btn-primary col-3" (click)="openEdit(usuario)">Editar</button>
        <button type="button" class="btn btn-success col-4" (click)="openVars(usuario)" >Variables</button>
      </div>

  </div>

</div>


<!--- +++++++++++++++++++++++++++ Formulario para agregar +++++++++++++++++++++++++++++++++++++++++ -->
<!-- <ng-template #newModal let-c="close" let-d="dismiss"  >
    <div class="modal-header">
      <h4 class="modal-title">Agregar Usuario</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">


        </div>
  </ng-template> -->

  <div bsModal  ngDraggable #modalNew="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="col-12 text-center">Agrega Usuario</h4>
        </div>
        <div class="modal-body">

          <form [formGroup]="newForm" (ngSubmit)="guarda(newForm.value)" class="offset-1"  >



              <!-- <div class="form-group row">
                <label class="col-6 col-form-label text-center">Nombre</label>
                <div class="col-5">

                  <input class="form-control"
                         type="text"
                         formControlName="nombreUsuario">
                </div>
              </div> -->

              <div class="form-group row text-center" >
                <label class="col-5 col-form-label">Nombre</label>
                <div class="col-6 has-success"
                [ngClass]="{'has-danger': !newForm.get('nombreUsuario').valid}">


                  <input class="form-control"
                         type="text"
                         formControlName="nombreUsuario" >
                         <div class="form-control-feedback" style="font-size:10px;"
                         *ngIf="!newForm.controls['nombreUsuario'].valid">
                           El nombre es requerido
                         </div>
                </div>
              </div>

              <!-- <div class="form-group row">
                <label class="col-6 col-form-label text-center">Apellido Paterno</label>
                <div class="col-5">

                  <input class="form-control"
                         type="text"
                         formControlName="apPat">
                </div>
              </div> -->

              <div class="form-group row text-center" >
                <label class="col-5 col-form-label">Apellido Paterno</label>
                <div class="col-6 has-success"
                [ngClass]="{'has-danger': !newForm.get('apPat').valid}">


                  <input class="form-control"
                         type="text"
                         formControlName="apPat" >
                         <div class="form-control-feedback" style="font-size:10px;"
                         *ngIf="!newForm.controls['apPat'].valid">
                           El nombre es requerido
                         </div>
                </div>
              </div>



            <!-- <div class="form-group row">
              <label class="col-6 col-form-label text-center">Apellido Materno</label>
              <div class="col-5">

                <input class="form-control"
                       type="text"
                       formControlName="apMat">
              </div>
            </div> -->

            <div class="form-group row text-center" >
              <label class="col-5 col-form-label">Apellido Materno</label>
              <div class="col-6 has-success"
              [ngClass]="{'has-danger': !newForm.get('apMat').valid}">


                <input class="form-control"
                       type="text"
                       formControlName="apMat" >
                       <div class="form-control-feedback" style="font-size:10px;"
                       *ngIf="!newForm.controls['apMat'].valid">
                         El nombre es requerido
                       </div>
              </div>
            </div>

            <!-- <div class="form-group row">
              <label class="col-6 col-form-label text-center">Nombre de usuario</label>
              <div class="col-md-5">

                <input class="form-control"
                       type="text"
                       formControlName="user">
              </div>
            </div> -->

            <div class="form-group row text-center" >
              <label class="col-5 col-form-label">Nombre de usuario</label>
              <div class="col-6 has-success"
              [ngClass]="{'has-danger': !newForm.get('user').valid}">


                <input class="form-control"
                       type="text"
                       formControlName="user" >
                       <div class="form-control-feedback" style="font-size:10px;"
                       *ngIf="!newForm.controls['user'].valid">
                         El nombre es requerido
                       </div>
              </div>
            </div>

            <!-- <div class="form-group row">
              <label class="col-6 col-form-label text-center">Contraseña</label>
              <div class="col-5">

                <input class="form-control"
                       type="text"
                       formControlName="contra">
              </div>
            </div> -->

            <div class="form-group row text-center" >
              <label class="col-5 col-form-label">Contraseña</label>
              <div class="col-6 has-success"
              [ngClass]="{'has-danger': !newForm.get('contra').valid}">


                <input class="form-control"
                       type="text"
                       formControlName="contra" >
                       <div class="form-control-feedback" style="font-size:10px;"
                       *ngIf="!newForm.controls['contra'].valid">
                         El nombre es requerido
                       </div>
              </div>
            </div>

            <div class="form-group row text-center" >
              <label class="col-5 col-form-label">Proyectos</label>
              <div class="col-6 has-success"
              [ngClass]="{'has-danger': !newForm.get('proyectos').valid}">


                <input class="form-control"
                       type="number"
                       formControlName="proyectos" >
                       <div class="form-control-feedback" style="font-size:10px;"
                       *ngIf="!newForm.controls['proyectos'].valid">
                         El numero de proyectos es requerido
                       </div>
              </div>
            </div>

            <div class="form-group row text-center" >
              <label class="col-5 col-form-label">Periodos por proyecto</label>
              <div class="col-6 has-success"
              [ngClass]="{'has-danger': !newForm.get('periodos').valid}">


                <input class="form-control"
                       type="number"
                       formControlName="periodos" >
                       <div class="form-control-feedback" style="font-size:10px;"
                       *ngIf="!newForm.controls['periodos'].valid">
                         El numero de periodos es requerido
                       </div>
              </div>
            </div>

            <div class="form-group row text-center" >
              <label class="col-5 col-form-label">Modificacion de periodos anteriores</label>
              <div class="col-6 has-success"
              [ngClass]="{'has-danger': !newForm.get('regresion').valid}">


                <input class="form-control"
                       type="number"
                       formControlName="regresion" >
                       <div class="form-control-feedback" style="font-size:10px;"
                       *ngIf="!newForm.controls['regresion'].valid">
                         El valor es requerido
                       </div>
              </div>
            </div>



                <input class="form-control"
                       type="text"
                       formControlName="Administrador_idAdministrador"
                       hidden>



                <div class="modal-footer">
                  <button  type="button" class="btn btn-outline-danger" (click)="modalNew.hide()">
                  Cancelar
                  </button>
                  <button type="submit" class="btn btn-outline-success"  [disabled]="!newForm.valid">
                    Guardar
                  </button>



                </div>
          </form>



        </div>
      </div>
    </div>
  </div>



<!--- Boton de Acción de Formulario de Edición--->







<div bsModal #modalEdit="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="col-12 text-center">Edita Usuario</h4>
      </div>
      <div class="modal-body">
        <form [formGroup]="editForm" (ngSubmit)="editaUsuario(editForm.value)"  >


            <div class="form-group row" hidden>
              <label class="col-6 col-form-label">id</label>
              <div class="col-8">

                <input class="form-control"
                       type="text"
                       placeholder="Nombre de Usuario"
                       formControlName="idUsuario">
              </div>
            </div>

            <div class="form-group row text-center" >
              <label class="col-5 col-form-label">Nombre</label>
              <div class="col-6 has-success"
              [ngClass]="{'has-danger': !editForm.get('nombreUsuario').valid}">


                <input class="form-control"
                       type="text"
                       formControlName="nombreUsuario" >
                       <div class="form-control-feedback" style="font-size:10px;"
                       *ngIf="!editForm.controls['nombreUsuario'].valid">
                         El nombre es requerido
                       </div>
              </div>
            </div>

            <!-- <div class="form-group row">
              <label class="col-6 col-form-label text-center">Apellido Paterno</label>
              <div class="col-5">

                <input class="form-control"
                       type="text"
                       formControlName="apPat">
              </div>
            </div> -->

            <div class="form-group row text-center" >
              <label class="col-5 col-form-label">Apellido Paterno</label>
              <div class="col-6 has-success"
              [ngClass]="{'has-danger': !editForm.get('apPat').valid}">


                <input class="form-control"
                       type="text"
                       formControlName="apPat" >
                       <div class="form-control-feedback" style="font-size:10px;"
                       *ngIf="!editForm.controls['apPat'].valid">
                         El nombre es requerido
                       </div>
              </div>
            </div>



          <!-- <div class="form-group row">
            <label class="col-6 col-form-label text-center">Apellido Materno</label>
            <div class="col-5">

              <input class="form-control"
                     type="text"
                     formControlName="apMat">
            </div>
          </div> -->

          <div class="form-group row text-center" >
            <label class="col-5 col-form-label">Apellido Materno</label>
            <div class="col-6 has-success"
            [ngClass]="{'has-danger': !editForm.get('apMat').valid}">


              <input class="form-control"
                     type="text"
                     formControlName="apMat" >
                     <div class="form-control-feedback" style="font-size:10px;"
                     *ngIf="!editForm.controls['apMat'].valid">
                       El nombre es requerido
                     </div>
            </div>
          </div>

          <!-- <div class="form-group row">
            <label class="col-6 col-form-label text-center">Nombre de usuario</label>
            <div class="col-md-5">

              <input class="form-control"
                     type="text"
                     formControlName="user">
            </div>
          </div> -->

          <div class="form-group row text-center" >
            <label class="col-5 col-form-label">Nombre de usuario</label>
            <div class="col-6 has-success"
            [ngClass]="{'has-danger': !editForm.get('user').valid}">


              <input class="form-control"
                     type="text"
                     formControlName="user" >
                     <div class="form-control-feedback" style="font-size:10px;"
                     *ngIf="!editForm.controls['user'].valid">
                       El nombre es requerido
                     </div>
            </div>
          </div>

          <!-- <div class="form-group row">
            <label class="col-6 col-form-label text-center">Contraseña</label>
            <div class="col-5">

              <input class="form-control"
                     type="text"
                     formControlName="contra">
            </div>
          </div> -->

          <div class="form-group row text-center" >
            <label class="col-5 col-form-label">Contraseña</label>
            <div class="col-6 has-success"
            [ngClass]="{'has-danger': !editForm.get('contra').valid}">


              <input class="form-control"
                     type="text"
                     formControlName="contra" >
                     <div class="form-control-feedback" style="font-size:10px;"
                     *ngIf="!editForm.controls['contra'].valid">
                       El nombre es requerido
                     </div>
            </div>
          </div>

          <div class="form-group row text-center" >
            <label class="col-5 col-form-label">Proyectos</label>
            <div class="col-6 has-success"
            [ngClass]="{'has-danger': !editForm.get('proyectos').valid}">


              <input class="form-control"
                     type="number"
                     formControlName="proyectos" >
                     <div class="form-control-feedback" style="font-size:10px;"
                     *ngIf="!editForm.controls['proyectos'].valid">
                       El numero de proyectos es requerido
                     </div>
            </div>
          </div>

          <div class="form-group row text-center" >
            <label class="col-5 col-form-label">Periodos por proyecto</label>
            <div class="col-6 has-success"
            [ngClass]="{'has-danger': !editForm.get('periodos').valid}">


              <input class="form-control"
                     type="number"
                     formControlName="periodos" >
                     <div class="form-control-feedback" style="font-size:10px;"
                     *ngIf="!editForm.controls['periodos'].valid">
                       El numero de periodos es requerido
                     </div>
            </div>
          </div>

          <div class="form-group row text-center" >
            <label class="col-5 col-form-label">Modificacion de periodos anteriores</label>
            <div class="col-6 has-success"
            [ngClass]="{'has-danger': !editForm.get('regresion').valid}">


              <input class="form-control"
                     type="number"
                     formControlName="regresion" >
                     <div class="form-control-feedback" style="font-size:10px;"
                     *ngIf="!editForm.controls['regresion'].valid">
                       El valor es requerido
                     </div>
            </div>
          </div>


              <input class="form-control"
                     type="text"
                     formControlName="Administrador_idAdministrador"
                     hidden>








              <div class="modal-footer">
                <button  type="button" class="btn btn-outline-danger" (click)="modalEdit.hide()">
                Cancelar
                </button>
                <button type="submit" class="btn btn-outline-success" [disabled]="!editForm.valid" >
                  Guardar
                </button>



              </div>
        </form>




      </div>
    </div>
  </div>
</div>





<div bsModal #modalConfDelete="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="col-12 text-center ">Confirmación</h4>
      </div>
      <div class="modal-body">


        <div class="row text-center">
          ¿Estas seguro que deseas eliminar al usuario "{{usuarioDelete.nombreUsuario}}" ?
          <br>
        </div>
        <br>
        <div class="row">
          <button type="button" class="btn btn-danger offset-2 col-3" (click)="eliminaUsuario(usuarioDelete.idUsuario)" >Si</button>
          <button type="button" class="btn btn-primary offset-2 col-3" (click)="modalConfDelete.hide()">No</button>
        </div>


      </div>
    </div>
  </div>
</div>







<!--                  Modal Copia                 -->



<!-- ////////////////////////////////////7777 Modal para cambiar variables de usuario //////////////////////////////////////-->

<div bsModal #modalVars="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="col-12 text-center">Variables de Proyectos de {{userSelected.nombreUsuario}} {{userSelected.apPat}}</h2>
      </div>
      <div class="modal-body">

        <div class="list-group">
          <button type="button" class="list-group-item list-group-item-action" (click)="openVariables()">Valores de Balance Iniciales</button>
          <button type="button" class="list-group-item list-group-item-action" (click)="openMaqInit()">Maquinaria Existente</button>
          <button type="button" class="list-group-item list-group-item-action" (click)="openModalProdInit()">Productos Existentes</button>
          <button type="button" class="list-group-item list-group-item-action" (click)="openModalZonaInit()">Zonas Existentes</button>
          <button type="button" class="list-group-item list-group-item-action" (click)="openModalCreditosInit()">Financiamientos</button>
        </div>


      </div>

      <div class="modal-footer">
        <button  type="button" class="btn btn-danger" (click)="modalVars.hide()">
        Salir
        </button>

      </div>
    </div>
  </div>
</div>




<!-- Modal de variables inciiales -->

<div bsModal #modalVariables="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="col-12 text-center">Variables Iniciales de Balance</h2>
        <h4 class="col-12 text-center" style="margin-top:10px">{{userSelected.nombreUsuario}} {{userSelected.apPat}}</h4>
      </div>


      <div class="modal-body">

        <form [formGroup]="variablesForm" class="offset-1" (ngSubmit)="balanceCero(variablesForm.value)" >

            <div class="form-group row" hidden>
              <label class="col-6 col-form-label text-center">id</label>
              <div class="col-5">

                <input class="form-control"
                       type="text"
                       formControlName="idUsuario">
              </div>
            </div>



            <!-- <div class="form-group row text-center">
              <label class="col-7 col-form-label">Caja y Bancos</label>

              <div class="input-group col-4">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="cajaBancos">
              </div>

            </div> -->
            <div class="row">
              <div class="col-12">
                <h5 class="col-12 text-center">Valores de Activo</h5>
                <div class="container">
                <hr>
                </div>

              </div>
            </div>
            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Cuentas Por Cobrar</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input class="form-control" formControlName="cuentasPorCobrar"
                currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }">
              </div>

            </div>

            <div class="form-group row text-center">
              <label class="col-5 col-form-label">IVA Acreditable</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input  class="form-control" aria-label="Amount (to the nearest dollar)"
                formControlName="IVAAcreditable"
                currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }">
              </div>

            </div>

            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Almacen de Articulo Terminado</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="almacenArtTerm">
              </div>

            </div>


            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Almacen de Materiales</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="almacenMateriales">
              </div>

            </div>


            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Terrenos</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="terreno">
              </div>

            </div>


            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Edificios e Instalaciones</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="edifInsta">
              </div>

            </div>

            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Maquinaria y Equipo</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="maqEquipo">
              </div>

            </div>


            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Muebeles y Enseres</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="mueblesEnseres">
              </div>

            </div>

            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Equipo de Transporte</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="eqTrans">
              </div>

            </div>


            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Pagos Por Anticipado</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="pagosAnticipado">
              </div>

            </div>


            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Gastos de Amortización</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="gastosAmortizacion">
              </div>

            </div>

            <div class="row">
              <div class="col-12">

                <div class="container" style="margin-top:30px">
                <h5 class="col-12 text-center">Valores de Pasivo</h5>
                <hr>
                </div>

              </div>
            </div>


            <div class="form-group row text-center">
              <label class="col-5 col-form-label">IVA por Enterar</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="IVAPorEnterar">
              </div>

            </div>

            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Impuestos por Pagar</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="imptosPorPagar">
              </div>

            </div>

            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Proveedores</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="proveedores">
              </div>

            </div>

            <div class="form-group row text-center">
              <label class="col-5 col-form-label">PTU por Pagar</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="PTUPorPagar">
              </div>

            </div>


            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Capital Social</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="capitalSocial">
              </div>

            </div>


            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Reserva Legal</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="reservaLegal">
              </div>

            </div>

            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Utilidad Acumulada</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="utilidadAcum">
              </div>

            </div>

            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Prestamos a menos de un Año</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="prestamosMenosAnio">
              </div>

            </div>


            <div class="form-group row text-center">
              <label class="col-5 col-form-label">Prestamos a Mas de un Año</label>

              <div class="input-group col-6">
                <span class="input-group-addon">$</span>
                <input currencyMask [options]="{ prefix: '', thousands: ',', precision:'0' }" class="form-control" aria-label="Amount (to the nearest dollar)" formControlName="prestamosMasAnio">
              </div>

            </div>

            <div class="modal-footer">
              <button  type="button" class="btn btn-outline-danger" (click)="modalVariables.hide()">
              Cancelar
              </button>
              <button type="button" class="btn btn-outline-primary" (click)="openCopia()">
                Copiar Variables
              </button>

              <button type="submit" class="btn btn-outline-success" >
                Guardar
              </button>



            </div>

        </form>



      </div>
    </div>
  </div>
</div>




<div bsModal #modalCopia="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="col-12 text-center">Copia de Variables Iniciales</h4>
      </div>
      <div class="modal-body">
      <accordion *ngFor="let usuario of usuarios" [closeOthers]="1">
        <accordion-group #group >
          <div accordion-heading>
            <div class="row">
              <h4 class="col-6">{{usuario.nombreUsuario}} {{usuario.apPat}}</h4>
              <button class="col-5 btn btn-primary" type="button" (click)="setVariablesUsuario(usuario)" >Copiar a Formulario</button>
            </div>

            <i class="pull-right float-xs-right glyphicon"
            [ngClass]="{'glyphicon-chevron-down': group?.isOpen, 'glyphicon-chevron-right': !group?.isOpen}"></i>
          </div>

              <table class="table table-hover text-center">
                <thead class="text-center">
                  <tr>
                    <th>Cuenta</th>
                    <th>Cantidad</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Caja y Bancos</td>
                    <td>{{usuario.cajaBancos| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Cuentas Por Cobrar:</td>
                    <td>{{usuario.cuentasPorCobrar| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>IVA Acreditable</td>
                    <td>{{usuario.IVAAcreditable| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Almacen de Articulo Terminado</td>
                    <td>{{usuario.almacenArtTerm | currency:'USD':true }}</td>
                  </tr>

                  <tr>
                    <td>Almacen de Materiales</td>
                    <td>{{usuario.almacenMateriales| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Terrenos</td>
                    <td>{{usuario.terreno| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Maquinaria y Equipo</td>
                    <td>{{usuario.maqEquipo| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Muebeles y Enseres</td>
                    <td>{{usuario.mueblesEnseres| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Equipo de Transporte</td>
                    <td>{{usuario.eqTrans| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Pagos Por Anticipado</td>
                    <td>{{usuario.pagosAnticipado| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Gastos de Amortización</td>
                    <td>{{usuario.gastosAmortizacion| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>IVA por Enterar</td>
                    <td>{{usuario.IVAPorEnterar| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Impuestos por Pagar</td>
                    <td>{{usuario.imptosPorPagar| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Proveedores</td>
                    <td>{{usuario.proveedores| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>PTU por Pagar</td>
                    <td>{{usuario.PTUPorPagar| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Capital Social</td>
                    <td>{{usuario.capitalSocial| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Reserva Legal</td>
                    <td>{{usuario.reservaLegal| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Utilidad Acumulada</td>
                    <td>{{usuario.utilidadAcum| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Prestamos a menos de un Año</td>
                    <td>{{usuario.prestamosMenosAnio| currency:'USD':true}}</td>
                  </tr>

                  <tr>
                    <td>Prestamos a Mas de un Año</td>
                    <td>{{usuario.prestamosMasAnio| currency:'USD':true}}</td>
                  </tr>

                </tbody>

              </table>
  </accordion-group>
</accordion>




      </div>
      <div class="modal-footer">
        <button  type="button" class="btn btn-outline-danger" (click)="modalCopia.hide()">
        Cancelar
        </button>

      </div>
    </div>
  </div>
</div>



<div bsModal #modalMaqInit="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="col-12 text-center">Maquinaria Inicial</h2>
      </div>
      <div class="modal-body">

        <div class="row">

          <div class=" col-5 offset-1" style="margin-top:10px">
            <span class="text-center" style="margin-bottom:20px;"><h3>Maquinarias Existentes</h3></span>

            <div class="card" *ngFor="let maquina of maquinas">
              <div class="card-block">
                <div class="row">
                  <img  src="assets/img/machine.png" style="height:40px;margin-left:10px;">

                  <div class="col-6">
                    <h4 class="card-title">{{maquina.nombreMaq}}</h4>
                  </div>
                  <div class="col-3 ">
                    <button type="button" class="btn btn-success" (click)= "agregarMaquinaria(maquina)"><i class="fa fa-plus" aria-hidden="true"></i></button>
                  </div>
                </div>
              </div>

            </div>
          </div>



          <div class=" col-5" style="margin-top:10px">
            <span class="text-center" style="margin-bottom:20px;" ><h3>Maquinarias Asignadas</h3></span>

            <div class="card" *ngFor="let maq of maquinariaU">
              <div class="card-block">
                <div class="row">
                  <div class="col-3 ">
                    <button type="button" class="btn btn-danger" (click)= "eliminaMaquinaria(maq)"><i class="fa fa-minus" aria-hidden="true"></i></button>
                  </div>
                  <div class="col-5">
                    <h4 class="card-title text-right">{{getNameByIdMaq(maq.idMaquinaria)}}</h4>
                  </div>
                  <img  src="assets/img/machine.png" style="height:40px;margin-right:10px;">
                  <h4><span class="badge badge-success">{{maq.cantidad}}</span></h4>
                </div>
              </div>
            </div>


          </div>
        </div>




      <div class="modal-footer">
        <button  type="button" class="btn btn-outline-danger" (click)="modalMaqInit.hide()">
        Salir
        </button>

      </div>
    </div>
  </div>
</div>
</div>



<div bsModal #modalZonaInit="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="col-12 text-center">Zonas de Mercado Desarrolladas</h2>
      </div>
      <div class="modal-body">

        <div class="row">

          <div class="list-group col-5 offset-1" style="margin-top:10px">
            <span class="text-center" style="margin-bottom:10px;"><h3>Zonas de Demanda</h3></span>
          <!-- <accordion>
            <accordion-group #group style="margin-top:10px" *ngFor="let zona of zonas">
              <div accordion-heading class="col-5" >
                <h3>{{zona.nombreZona}}</h3>
                <i class="pull-right float-xs-right glyphicon"
                [ngClass]="{'glyphicon-chevron-down': group?.isOpen, 'glyphicon-chevron-right': !group?.isOpen}"></i>
              </div>
              <div class="" *ngFor="let producto of zona.productos">
                  <span class="col-4">{{getNameById(producto.idProducto)}}</span>
                  <button type="button" class="btn btn-primary" (click)="agregarZona(zona,producto)">Asignar</button>

              </div>
            </accordion-group>
          </accordion> -->

          <div class="card" *ngFor="let zona of zonas">
            <div class="card-block">
              <div class="row" style="margin-bottom:20px;">
                <img  src="assets/img/zone.png" style="height:40px;margin-left:20px;">

                <div class="col-7">
                  <h4 class="card-title">{{zona.nombreZona}}</h4>
                </div>
                <div class="col-1 ">
                  <!-- <button type="button" class="btn btn-success" (click)= "agregarMaquinaria(maquina)"><i class="fa fa-plus" aria-hidden="true"></i></button> -->
                </div>
              </div>
              <div class="card-footer">
                <div class="list-group">
                  <li type="button"
                  class="list-group-item list-group-item-action"
                  *ngFor="let producto of zona.productos">{{getNameById(producto.idProducto)}}
                  <button type="button" (click)="agregarZona(zona,producto)" class="btn btn-primary col-3 offset-4"><i class="fa fa-plus" aria-hidden="true"></i></button></li>
                </div>


              </div>
            </div>

          </div>



          </div>


          <div class="list-group col-5" style="margin-top:10px">
            <span class="text-center" style="margin-bottom:10px;"><h3>Productos Asignados</h3></span>
            <!-- <a class="list-group-item list-group-item-action  align-items-start active">
              <div class="d-flex w-100 justify-content-between" *ngFor="let producto of zonasU">
                <h4 class="mb-2 col-6">{{getNameById(producto.idProducto)}} ({{getNameByIdZona(producto.idZona)}})</h4>
                <button type="button" class="btn btn-danger" (click)="eliminaProductoZona(producto)">Eliminar</button>


              </div>

              <small class="mb-1"></small>
            </a> -->

            <div class="card" *ngFor="let producto of zonasU">
              <div class="card-block">
                <div class="row" style="margin-bottom:20px;">
                  <img  src="assets/img/box.png" style="height:40px;margin-left:20px;">

                  <div class="col-7">
                    <h4 class="card-title">{{getNameById(producto.idProducto)}}</h4>
                  </div>
                  <div class="col-1 ">
                    <button type="button" class="btn btn-danger" (click)="eliminaProductoZona(producto)"><i class="fa fa-minus" aria-hidden="true"></i></button>
                  </div>
                </div>
                <div class="card-footer">
                  <div class="row">
                    <img  src="assets/img/zone.png" style="height:20px;margin-left:20px;margin-top:5px;">
                    <div class="col-7">
                      {{getNameByIdZona(producto.idZona)}}
                    </div>
                  </div>

                </div>
              </div>

            </div>



          </div>


        </div>




      <div class="modal-footer">
        <button  type="button" class="btn btn-outline-danger" (click)="modalZonaInit.hide()">
        Salir
        </button>

      </div>
    </div>
  </div>
</div>
</div>

<!--Modal de asignacion de Productos-->
<div bsModal #modalProdInit="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="col-12 text-center">Productos Iniciales Desarrollados</h2>
      </div>
      <div class="modal-body">

        <div class="row">
          <div class="list-group col-5 offset-1" style="margin-top:10px">
          <span class="text-center" style="margin-bottom:10px;"><h3>Productos de Desarrollo</h3></span>
          <div class="card" *ngFor="let producto of productos">
            <div class="card-block">
              <div class="row">
                <img  src="assets/img/box.png" style="height:40px;margin-left:10px;">

                <div class="col-6">
                  <h4 class="card-title">{{producto.nombreProd}}</h4>
                </div>
                <div class="col-3 ">
                  <button type="button" class="btn btn-success" (click)="agregarProducto(producto)"><i class="fa fa-plus" aria-hidden="true"></i></button>
                </div>
              </div>
            </div>

          </div>
        </div>

          <div class="list-group col-5" style="margin-top:10px">
            <span class="text-center" style="margin-bottom:10px;"><h3>Productos Existentes</h3></span>
          <div class="card" *ngFor="let producto of productosU">
            <div class="card-block">
              <div class="row">
                <div class="col-3 ">
                  <button type="button" class="btn btn-danger" (click)="eliminaProducto(producto)"><i class="fa fa-minus" aria-hidden="true"></i></button>
                </div>
                <div class="col-7">
                  <h4 class="card-title text-right">{{getNameById(producto.idProducto)}}</h4>
                </div>
                <img  src="assets/img/box.png" style="height:40px;">
              </div>
            </div>
          </div>
        </div>


        </div>



      <div class="modal-footer">
        <button  type="button" class="btn btn-outline-danger" (click)="modalProdInit.hide()">
        Salir
        </button>

      </div>
    </div>
  </div>
</div>
</div>

<!--Modal de asignacion de creditos-->

<div bsModal #modalCreditosInit="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="col-12 text-center">Asignación de tipos de financiamiento</h2>
      </div>
      <div class="modal-body">

        <div class="row">
          <div class="list-group col-5 offset-1" style="margin-top:10px">
          <span class="text-center" style="margin-bottom:10px;"><h3>Creditos</h3></span>
          <div class="card" *ngFor="let credito of creditos">
            <div class="card-block">
              <div class="row">
                <img  src="assets/img/credit.png" style="height:40px;margin-left:10px;">

                <div class="col-6">
                  <h4 class="card-title">{{credito.nombreCredito}}</h4>
                </div>
                <div class="col-3 ">
                  <button type="button" class="btn btn-success" (click)="agregarCredito(credito)"><i class="fa fa-plus" aria-hidden="true"></i></button>
                </div>
              </div>
            </div>

          </div>
        </div>

          <div class="list-group col-5" style="margin-top:10px">
            <span class="text-center" style="margin-bottom:10px;"><h3>Creditos Asignados</h3></span>
          <div class="card" *ngFor="let credito of creditosU">
            <div class="card-block">
              <div class="row">
                <div class="col-3 ">
                  <button type="button" class="btn btn-danger" (click)="eliminaCredito(credito)"><i class="fa fa-minus" aria-hidden="true"></i></button>
                </div>
                <div class="col-7">
                  <h4 class="card-title text-right">{{getNameByIdCredito(credito.idCredito)}}</h4>
                </div>
                <img  src="assets/img/credit.png" style="height:40px;">
              </div>
            </div>
          </div>
        </div>


        </div>



      <div class="modal-footer">
        <button  type="button" class="btn btn-outline-danger" (click)="modalCreditosInit.hide()">
        Salir
        </button>

      </div>
    </div>
  </div>
</div>
</div>

<!--Modal de que no cuadran los valores del balance-->

<div bsModal #modalErrBalance="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="col-12 text-center ">Error en Balance</h4>
      </div>
      <div class="modal-body">


        <div class="row offset-1">
          <div class="">
            Los valores del Balance no cuadran

          </div>
          <br>
        </div>
        <br>
        <div class="row">
          <button type="button" class="btn btn-danger offset-4 col-4"  (click)="modalErrBalance.hide()">Ok</button>
        </div>


      </div>
    </div>
  </div>
</div>
</div>


<ngl-modal header="Variables Generales"   [(open)]="openVarsGen" size="small" directional="false">
  <div body>
      <div class="col-12">
        <div class="row" style="margin-bottom:10px" *ngFor="let t of variables">
          <h3 class="text-center col-4">{{t.concepto}}</h3>
          <h3 class="col-4 text-center">{{t.valor}}</h3>
          <button type="button" class="btn btn-primary col-4" (click)="selectVariables(t)">Editar</button>
        </div>


      </div>

  </div>
  </ngl-modal>



  <ngl-modal header="Variables Generales"   [(open)]="openVarUnit" size="small" directional="false">
    <div body>
      <form class="" (ngSubmit)="asignaVar()" [formGroup]="varsForm">
        <input type="text" formControlName="concepto" hidden>

        <div class="form-group row text-center" >
          <label class="col-5 col-form-label">{{variablesSelected.concepto}}</label>

          <div class="input-group col-6 has-success " [ngClass]="{'has-danger': !varsForm.get('valor').valid}">
              <span class="input-group-addon">%</span>
              <input type="number" class="form-control" aria-label="Amount (to the nearest dollar)"
              formControlName="valor">



          </div>
          <div class="form-control-feedback offset-6 text-center col-4" style="font-size:10px;"
          [ngClass]="{'has-danger': !varsForm.get('valor').valid}"
          *ngIf="!varsForm.controls['valor'].valid">
            El porcentaje es requerido
          </div>
        </div>



        <button type="submit" class="btn btn-primary">Guardar</button>



      </form>

    </div>
    </ngl-modal>
